<UserControl x:Class="Billiards.UI.Views.ReportsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Filters -->
        <Border Background="{StaticResource SurfaceColor}" 
                BorderBrush="{StaticResource PrimaryLightColor}" 
                BorderThickness="2"
                CornerRadius="5"
                Padding="15"
                Margin="0,0,0,15">
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Từ ngày:" 
                           VerticalAlignment="Center" 
                           FontWeight="SemiBold"
                           Foreground="{StaticResource TextColor}"
                           Margin="0,0,8,0"/>
                <DatePicker x:Name="dpStartDate" Width="140" Margin="0,0,16,0" FontSize="14"/>
                <TextBlock Text="Đến ngày:" 
                           VerticalAlignment="Center" 
                           FontWeight="SemiBold"
                           Foreground="{StaticResource TextColor}"
                           Margin="0,0,8,0"/>
                <DatePicker x:Name="dpEndDate" Width="140" Margin="0,0,16,0" FontSize="14"/>
                <TextBlock Text="Khách hàng:" 
                           VerticalAlignment="Center" 
                           FontWeight="SemiBold"
                           Foreground="{StaticResource TextColor}"
                           Margin="0,0,8,0"/>
                <TextBox x:Name="txtCustomerNameFilter" Width="180" Margin="0,0,16,0" FontSize="14"/>
                <TextBlock Text="Nhân viên:" 
                           VerticalAlignment="Center" 
                           FontWeight="SemiBold"
                           Foreground="{StaticResource TextColor}"
                           Margin="0,0,8,0"/>
                <TextBox x:Name="txtEmployeeNameFilter" Width="180" Margin="0,0,16,0" FontSize="14"/>
                <Button x:Name="btnRunReport" 
                        Content="Chạy báo cáo" 
                        Click="btnRunReport_Click" 
                        Padding="16,8"
                        FontSize="14"
                        Height="38"/>
            </StackPanel>
        </Border>

        <!-- Results -->
        <DataGrid x:Name="dgReports"
                  Grid.Row="1"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  CanUserAddRows="False"
                  Margin="0,0,0,10">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding ID}" Width="80"/>
                <DataGridTextColumn Header="Bàn" Binding="{Binding Table.TableName}" Width="120"/>
                <DataGridTextColumn Header="Bắt đầu" Binding="{Binding StartTime, StringFormat=\{0:dd/MM/yyyy HH:mm\}}" Width="160"/>
                <DataGridTextColumn Header="Kết thúc" Binding="{Binding EndTime, StringFormat=\{0:dd/MM/yyyy HH:mm\}}" Width="160"/>
                <DataGridTextColumn Header="Tiền giờ" Binding="{Binding TableFee, StringFormat=\{0:N0\}}" Width="120"/>
                <DataGridTextColumn Header="Dịch vụ" Binding="{Binding ProductFee, StringFormat=\{0:N0\}}" Width="120"/>
                <DataGridTextColumn Header="Giảm giá" Binding="{Binding Discount, StringFormat=\{0:N0\}}" Width="120"/>
                <DataGridTextColumn Header="Tổng" Binding="{Binding TotalAmount, StringFormat=\{0:N0\}}" Width="140"/>
                <DataGridTextColumn Header="NV tạo" Binding="{Binding CreatedByEmployee.FullName}" Width="160"/>
                <DataGridTextColumn Header="Khách" Binding="{Binding Customer.FullName}" Width="160"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Summary -->
        <Border Grid.Row="2" 
                Background="{StaticResource PrimaryColor}" 
                BorderBrush="{StaticResource PrimaryDarkColor}" 
                BorderThickness="2"
                CornerRadius="5"
                Padding="20">
            <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                <StackPanel Orientation="Horizontal" Margin="0,0,30,0">
                    <TextBlock Text="Số hóa đơn: " 
                               FontWeight="Bold" 
                               FontSize="14"
                               Foreground="White"/>
                    <TextBlock x:Name="txtCount" 
                               FontSize="14"
                               FontWeight="Bold"
                               Foreground="White"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,30,0">
                    <TextBlock Text="Tiền giờ: " 
                               FontWeight="Bold" 
                               FontSize="14"
                               Foreground="White"/>
                    <TextBlock x:Name="txtSumTableFee" 
                               FontSize="14"
                               FontWeight="Bold"
                               Foreground="White"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,30,0">
                    <TextBlock Text="Dịch vụ: " 
                               FontWeight="Bold" 
                               FontSize="14"
                               Foreground="White"/>
                    <TextBlock x:Name="txtSumProductFee" 
                               FontSize="14"
                               FontWeight="Bold"
                               Foreground="White"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal" Margin="0,0,30,0">
                    <TextBlock Text="Giảm giá: " 
                               FontWeight="Bold" 
                               FontSize="14"
                               Foreground="White"/>
                    <TextBlock x:Name="txtSumDiscount" 
                               FontSize="14"
                               FontWeight="Bold"
                               Foreground="White"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Tổng doanh thu: " 
                               FontWeight="Bold" 
                               FontSize="15"
                               Foreground="White"/>
                    <TextBlock x:Name="txtSumTotal" 
                               FontSize="15"
                               FontWeight="Bold"
                               Foreground="#FFEB3B"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid>
</UserControl>


