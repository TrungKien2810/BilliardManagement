<UserControl x:Class="Billiards.UI.Views.ReportsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Filters -->
        <StackPanel Orientation="Horizontal" Margin="0,0,0,10">
            <TextBlock Text="Từ ngày:" VerticalAlignment="Center" Margin="0,0,8,0"/>
            <DatePicker x:Name="dpStartDate" Width="140" Margin="0,0,16,0"/>
            <TextBlock Text="Đến ngày:" VerticalAlignment="Center" Margin="0,0,8,0"/>
            <DatePicker x:Name="dpEndDate" Width="140" Margin="0,0,16,0"/>
            <TextBlock Text="Khách hàng:" VerticalAlignment="Center" Margin="0,0,8,0"/>
            <TextBox x:Name="txtCustomerNameFilter" Width="180" Margin="0,0,16,0"/>
            <TextBlock Text="Nhân viên tạo:" VerticalAlignment="Center" Margin="0,0,8,0"/>
            <TextBox x:Name="txtEmployeeNameFilter" Width="180" Margin="0,0,16,0"/>
            <Button x:Name="btnRunReport" Content="Chạy báo cáo" Click="btnRunReport_Click" Padding="12,6"/>
        </StackPanel>

        <!-- Results -->
        <DataGrid x:Name="dgReports"
                  Grid.Row="1"
                  AutoGenerateColumns="False"
                  IsReadOnly="True"
                  CanUserAddRows="False"
                  Margin="0,0,0,10">
            <DataGrid.Columns>
                <DataGridTextColumn Header="ID" Binding="{Binding ID}" Width="80"/>
                <DataGridTextColumn Header="Bàn" Binding="{Binding Table.TableName}" Width="120"/>
                <DataGridTextColumn Header="Bắt đầu" Binding="{Binding StartTime, StringFormat=\{0:dd/MM/yyyy HH:mm\}}" Width="160"/>
                <DataGridTextColumn Header="Kết thúc" Binding="{Binding EndTime, StringFormat=\{0:dd/MM/yyyy HH:mm\}}" Width="160"/>
                <DataGridTextColumn Header="Tiền giờ" Binding="{Binding TableFee, StringFormat=\{0:N0\}}" Width="120"/>
                <DataGridTextColumn Header="Dịch vụ" Binding="{Binding ProductFee, StringFormat=\{0:N0\}}" Width="120"/>
                <DataGridTextColumn Header="Giảm giá" Binding="{Binding Discount, StringFormat=\{0:N0\}}" Width="120"/>
                <DataGridTextColumn Header="Tổng" Binding="{Binding TotalAmount, StringFormat=\{0:N0\}}" Width="140"/>
                <DataGridTextColumn Header="NV tạo" Binding="{Binding CreatedByEmployee.FullName}" Width="160"/>
                <DataGridTextColumn Header="Khách" Binding="{Binding Customer.FullName}" Width="160"/>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Summary -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0">
            <StackPanel Orientation="Horizontal" Margin="0,0,24,0">
                <TextBlock Text="Số hóa đơn: " FontWeight="Bold"/>
                <TextBlock x:Name="txtCount"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="0,0,24,0">
                <TextBlock Text="Tiền giờ: " FontWeight="Bold"/>
                <TextBlock x:Name="txtSumTableFee"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="0,0,24,0">
                <TextBlock Text="Dịch vụ: " FontWeight="Bold"/>
                <TextBlock x:Name="txtSumProductFee"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal" Margin="0,0,24,0">
                <TextBlock Text="Giảm giá: " FontWeight="Bold"/>
                <TextBlock x:Name="txtSumDiscount"/>
            </StackPanel>
            <StackPanel Orientation="Horizontal">
                <TextBlock Text="Tổng doanh thu: " FontWeight="Bold"/>
                <TextBlock x:Name="txtSumTotal"/>
            </StackPanel>
        </StackPanel>
    </Grid>
</UserControl>


