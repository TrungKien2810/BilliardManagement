<UserControl x:Class="Billiards.UI.Views.ProductManagementView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             mc:Ignorable="d" 
             d:DesignHeight="600" d:DesignWidth="1000">
    <Grid Margin="10">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="350"/>
        </Grid.ColumnDefinitions>

        <!-- Left Column: DataGrid -->
        <StackPanel Grid.Column="0" Margin="0,0,10,0">
            <TextBlock Text="Danh sách Sản phẩm" FontSize="16" FontWeight="Bold" Margin="0,0,0,10"/>
            <DataGrid x:Name="dgProducts" 
                      AutoGenerateColumns="False"
                      SelectionChanged="dgProducts_SelectionChanged"
                      IsReadOnly="True"
                      Height="500">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="ID" Binding="{Binding ID}" Width="50"/>
                    <DataGridTextColumn Header="Tên sản phẩm" Binding="{Binding ProductName}" Width="*"/>
                    <DataGridTextColumn Header="Danh mục" Binding="{Binding Category.CategoryName}" Width="150"/>
                    <DataGridTextColumn Header="Giá bán" Binding="{Binding SalePrice, StringFormat='{}{0:N0} VNĐ'}" Width="120"/>
                    <DataGridTextColumn Header="Tồn kho" Binding="{Binding StockQuantity}" Width="80"/>
                </DataGrid.Columns>
            </DataGrid>
        </StackPanel>

        <!-- Right Column: Form -->
        <StackPanel Grid.Column="1">
            <TextBlock Text="Thông tin Sản phẩm" FontSize="16" FontWeight="Bold" Margin="0,0,0,10"/>
            <Grid x:Name="formProduct">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Margin="0,0,0,10">
                    <TextBlock Text="Tên sản phẩm:" Margin="0,0,0,5"/>
                    <TextBox x:Name="txtProductName" Height="30"/>
                </StackPanel>

                <StackPanel Grid.Row="1" Margin="0,0,0,10">
                    <TextBlock Text="Danh mục:" Margin="0,0,0,5"/>
                    <ComboBox x:Name="cmbCategory" 
                              DisplayMemberPath="CategoryName" 
                              SelectedValuePath="ID"
                              Height="30"/>
                </StackPanel>

                <StackPanel Grid.Row="2" Margin="0,0,0,10">
                    <TextBlock Text="Giá bán (VNĐ):" Margin="0,0,0,5"/>
                    <TextBox x:Name="txtSalePrice" Height="30"/>
                </StackPanel>

                <StackPanel Grid.Row="3" Margin="0,0,0,20">
                    <TextBlock Text="Tồn kho:" Margin="0,0,0,5"/>
                    <TextBox x:Name="txtStockQuantity" Height="30"/>
                </StackPanel>

                <StackPanel Grid.Row="4" Orientation="Horizontal" HorizontalAlignment="Right">
                    <Button x:Name="btnAddNew" Content="Làm mới" Width="100" Height="35" Margin="5,0" Click="btnAddNew_Click"/>
                    <Button x:Name="btnSave" Content="Tạo/Lưu" Width="100" Height="35" Margin="5,0" Click="btnSave_Click"/>
                    <Button x:Name="btnDelete" Content="Xóa" Width="100" Height="35" Margin="5,0" Click="btnDelete_Click"/>
                </StackPanel>
            </Grid>

            <!-- Category Management Section -->
            <Separator Margin="0,20,0,10"/>
            <TextBlock Text="Quản lý Danh mục" FontSize="14" FontWeight="Bold" Margin="0,0,0,10"/>
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <StackPanel Grid.Row="0" Margin="0,0,0,10">
                    <TextBlock Text="Tên danh mục:" Margin="0,0,0,5"/>
                    <TextBox x:Name="txtCategoryName" Height="30"/>
                </StackPanel>

                <StackPanel Grid.Row="1" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,0,0,10">
                    <Button x:Name="btnAddCategory" Content="Thêm/Lưu" Width="100" Height="35" Margin="5,0" Click="btnAddCategory_Click"/>
                    <Button x:Name="btnDeleteCategory" Content="Xóa" Width="100" Height="35" Margin="5,0" Click="btnDeleteCategory_Click"/>
                </StackPanel>

                <ListBox x:Name="lbCategories" 
                         Grid.Row="2"
                         DisplayMemberPath="CategoryName"
                         SelectionChanged="lbCategories_SelectionChanged"
                         Height="150"/>
            </Grid>
        </StackPanel>
    </Grid>
</UserControl>

